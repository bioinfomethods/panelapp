{% extends 'default.html' %}

{% block body %}
<h3>Details</h3>
<div class="panel panel-default">
  <div class="panel-body">
      <dl class="dl-separated">
          {% if request.session.user_type == "GEL" %}
              <dt>GEL status</dt>
              <dd>{{ record|gene_gel_status }}</dd>
          {% endif %}
          {% if record.moi %}
          <dt>Mode of Inheritance</dt>
          <dd>{{ record.moi }}</dd>
          {% endif %}
          {% if record.evidence %}
          <dt>Sources</dt>
          <dd>
              <ul>
                  {% for ev in record.evidence %}
                      <li>{{ ev.name }}</li>
                  {% endfor %}
              </ul>
              {% if request.session.user_type == "GEL" %}
                  <a class="link-muted" href="{% url 'PanelApp.views.views_main.clear_sources' panel.id record.gene.gene_symbol %}" data-ajax="true" data-success="fragments()">Clear Sources</a>
              {% endif %}
          </dd>
          {% endif %}
          {% if record.phenotypes|join:"" != '' %}
              <dt>Phenotypes</dt>
              <dd>
                  <ul>
                      {% for phenotype in record.phenotypes %}
                          {% if phenotype %}
                              <li>{{ phenotype }}</li>
                          {% endif %}
                      {% endfor %}
                  </ul>
                  {% if request.session.user_type == "GEL" %}
                      <a href="{% url 'PanelApp.views.views_main.clear_phenotypes' panel.id record.gene.gene_symbol %}" class="link-muted" data-ajax="true" data-success="fragments()">
                          Clear phenotypes
                      </a>
                  {% endif %}
              </dd>
          {% endif %}
          {% if record.tags|join:"" != '' %}
            <dt>Tags</dt>
            <dd class="tag-list">
              {% for tag in record.tags %}
                <span class="label label-default">{{ tag }}</span>
              {% endfor %}
            </dd>
          {% endif %}
          <dt>OMIM</dt>
          <dd><a href="http://omim.org/entry/{{ record.gene.omim_gene }}" target="_blank">{{ record.gene.omim_gene }}</a></dd>
          <dt>Clinvar variants</dt>
          <dd>
            <a href="http://www.ncbi.nlm.nih.gov/clinvar?term={{ record.gene.gene_symbol }}%5BGene%20Name%5D" target="_blank"> Variants in {{ record.gene.gene_symbol }}</a>
          </dd>
          <dt>Penetrance</dt>
          <dd>{{ record.penetrance }}</dd>
          {% if record.publications|join:"" != '' %}
          <dt>Publications</dt>
          <dd>
            <ul>
            {% for publication in record.publications %}
              <li>{{ publication|pubmed_link|join:'' }}</li>
            {% endfor %}
            </ul>

            {% if request.session.user_type == "GEL" %}
              <a href="{% url 'PanelApp.views.views_main.clear_publications' panel.id record.gene.gene_symbol %}" class="link-muted" data-ajax="true" data-success="fragments()">
                Clear publications
              </a>
            {% endif %}
          </dd>
          {% endif %}
          {% if record.mode_of_pathogenicity %}
          <dt>Mode of Pathogenicity</dt>
          <dd>{{ record.mode_of_pathogenicity }}</dd>
            {% if request.session.user_type == "GEL" %}
              <a href="{% url 'PanelApp.views.views_main.clear_mode_of_pathogenicity' panel.id record.gene.gene_symbol %}" class="link-muted" data-ajax="true" data-success="fragments()">
                Clear mode of Pathogenicity
              </a>
            {% endif %}
          {% endif %}
          <dt>Panels with this gene</dt>
          <dd>
            <ul>
              {% for sharing_panel in sharing_panels %}
                <li><a href="{% url 'PanelApp.views.views_main.edit_panel' sharing_panel.id  %}">
                  {{ sharing_panel.panel_name }}
                </a></li>
              {% endfor %}
            </ul>
          </dd>
      </dl>
  </div>
  {% if request.session.user_type == "GEL" %}
  <div class="panel-footer">
    <a href="{% url 'PanelApp.views.views_main.edit_gene' panel.id record.gene.gene_symbol%}" class="btn btn-info" data-ajax="true" data-success="djangoAjaxHandler">
      <i class="fa fa-edit"></i> Edit gene
    </a>
  </div>
  {% endif %}
</div>
{% endblock %}
