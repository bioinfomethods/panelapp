/**
 * Literature Assignment Widget Styles
 *
 * Cohesive visual system for assignment tracking:
 * - Warm coral accent for "my task" / assigned states
 * - Gold/silver depth treatment for completion states
 * - Diagonal strikethrough for skipped genes
 * - Polished dropdown matching the "Add gene" button aesthetic
 */

/* ==========================================================================
   CSS Custom Properties - Design Tokens
   ========================================================================== */

:root {
  /* Warm salmon for "my task" - inviting, actionable */
  --lit-task-hue: 12;
  --lit-task-color: hsl(var(--lit-task-hue), 80%, 58%);
  --lit-task-light: hsl(var(--lit-task-hue), 100%, 96%);
  --lit-task-border: hsl(var(--lit-task-hue), 70%, 65%);
  --lit-task-glow: hsla(var(--lit-task-hue), 70%, 55%, 0.2);
  --lit-task-text: hsl(var(--lit-task-hue), 65%, 38%);

  /* Bright gold for concordant - celebratory but secondary to tasks */
  --lit-gold-color: #f0c020;
  --lit-gold-light: rgba(255, 215, 0, 0.2);
  --lit-gold-glow: rgba(240, 192, 32, 0.35);

  /* Silver for discordant - shinier, clearly "completed but different" */
  --lit-silver-color: #90a0a8;
  --lit-silver-light: rgba(180, 200, 210, 0.18);
  --lit-silver-glow: rgba(144, 160, 168, 0.4);

  /* Muted for skipped */
  --lit-muted-color: #8e99a4;
  --lit-muted-bg: #f5f6f7;
  --lit-muted-strike: #9ca3af;

  /* Teal for "assigned to someone else" - informational, not urgent */
  --lit-other-hue: 174;
  --lit-other-color: hsl(var(--lit-other-hue), 50%, 40%);
  --lit-other-light: hsl(var(--lit-other-hue), 60%, 95%);
  --lit-other-border: hsl(var(--lit-other-hue), 45%, 55%);
  --lit-other-glow: hsla(var(--lit-other-hue), 55%, 45%, 0.3);
}

/* ==========================================================================
   Header Widgets - Assignment dropdowns and skip badges
   ========================================================================== */

.assignment-slot {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-left: 10px;
  vertical-align: middle;
}

.lit-widget {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 6px;
  border-radius: 5px;
  transition: all 0.2s ease;
}

/* Pending state - subtle, awaiting assignment */
.lit-widget:not(.lit-assigned-mine):not(.lit-assigned-other):not(.lit-skipped-widget) {
  background: linear-gradient(135deg, #f8f9fa 0%, #eef0f2 100%);
  border: 1.5px solid #d1d5db;
}

/* Assigned to ME - soft peach accent matching ToC my-task */
.lit-widget.lit-assigned-mine {
  background: linear-gradient(
    135deg,
    var(--lit-task-light) 0%,
    hsl(var(--lit-task-hue), 75%, 92%) 100%
  );
  border: 2px solid var(--lit-task-border);
  box-shadow:
    0 0 6px var(--lit-task-glow),
    0 2px 4px rgba(0, 0, 0, 0.06);
  position: relative;
}

/* Assigned to SOMEONE ELSE - teal accent (informational, not urgent) */
.lit-widget.lit-assigned-other {
  background: linear-gradient(
    135deg,
    var(--lit-other-light) 0%,
    hsl(var(--lit-other-hue), 65%, 92%) 100%
  );
  border: 2px solid var(--lit-other-border);
  box-shadow:
    0 0 8px var(--lit-other-glow),
    0 2px 4px rgba(0, 0, 0, 0.06);
  position: relative;
}

/* Shine overlay for assigned states */
.lit-widget.lit-assigned-mine::before,
.lit-widget.lit-assigned-other::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255, 255, 255, 0.4) 50%,
    transparent 70%
  );
  border-radius: 4px;
  opacity: 0.6;
  pointer-events: none;
}

/* Polished dropdown - matches "Add gene" button aesthetic */
.lit-assignee-select {
  font-size: 0.85em;
  font-weight: 500;
  padding: 4px 24px 4px 8px;
  border: 1.5px solid #d1d5db;
  border-radius: 4px;
  background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
  color: #374151;
  cursor: pointer;
  transition: all 0.2s ease;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M3 4.5L6 8l3-3.5H3z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 6px center;
  min-width: 52px;
}

.lit-assignee-select:hover {
  border-color: #9ca3af;
  background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.lit-assignee-select:focus {
  outline: none;
  border-color: var(--lit-task-color);
  box-shadow:
    0 0 0 3px hsla(var(--lit-task-hue), 70%, 55%, 0.15),
    0 1px 3px rgba(0, 0, 0, 0.08);
}

/* When assigned to ME, dropdown gets coral accent */
.lit-widget.lit-assigned-mine .lit-assignee-select {
  border-color: var(--lit-task-border);
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.9) 0%,
    var(--lit-task-light) 100%
  );
  color: hsl(var(--lit-task-hue), 50%, 35%);
  font-weight: 600;
}

/* When assigned to SOMEONE ELSE, dropdown gets teal accent */
.lit-widget.lit-assigned-other .lit-assignee-select {
  border-color: var(--lit-other-border);
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.9) 0%,
    var(--lit-other-light) 100%
  );
  color: hsl(var(--lit-other-hue), 45%, 30%);
  font-weight: 600;
}

/* Skip button - subtle, secondary action */
.lit-skip-btn {
  font-size: 1em;
  padding: 2px 8px;
  border: 1.5px solid #e5e7eb;
  border-radius: 4px;
  background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
  color: #9ca3af;
  cursor: pointer;
  line-height: 1.2;
  transition: all 0.2s ease;
}

.lit-skip-btn:hover {
  border-color: #d1d5db;
  background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
  color: #6b7280;
  transform: scale(1.05);
}

.lit-skip-btn:active {
  transform: scale(0.98);
}

/* ==========================================================================
   Skipped State - Diagonal strikethrough badge
   ========================================================================== */

.lit-skipped-widget {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
}

.lit-badge {
  font-size: 0.8em;
  padding: 4px 12px;
  border-radius: 4px;
  font-weight: 500;
  display: inline-block;
  position: relative;
}

/* Skipped badge with diagonal strikethrough pattern */
.lit-skipped {
  background: linear-gradient(
    135deg,
    var(--lit-muted-bg) 0%,
    #ebedf0 100%
  );
  color: var(--lit-muted-color);
  border: 1.5px solid #d1d5db;
  position: relative;
  overflow: hidden;
}

/* Diagonal strikethrough lines */
.lit-skipped::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(
    -45deg,
    transparent,
    transparent 3px,
    rgba(156, 163, 175, 0.25) 3px,
    rgba(156, 163, 175, 0.25) 4px
  );
  pointer-events: none;
}

/* Restore button */
.lit-restore-btn {
  font-size: 0.9em;
  padding: 3px 7px;
  border: 1.5px solid #d1d9e6;
  border-radius: 4px;
  background: linear-gradient(135deg, #f8fafc 0%, #eef2f7 100%);
  color: #64748b;
  cursor: pointer;
  line-height: 1.2;
  transition: all 0.2s ease;
}

.lit-restore-btn:hover {
  border-color: #22c55e;
  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
  color: #16a34a;
  box-shadow: 0 0 8px rgba(34, 197, 94, 0.25);
  transform: scale(1.08);
}

.lit-restore-btn:active {
  transform: scale(1);
}

/* ==========================================================================
   ToC Highlighting - Status indicators on gene links

   These classes are applied to <a> elements within .toc-gene-list
   All states now have consistent depth treatment
   ========================================================================== */

/* My task: assigned to current user, not yet completed */
/* Warm salmon with text accent - clearly actionable */
.toc-gene-list a.my-task {
  display: inline-block;
  padding: 3px 6px;
  border: 2px solid var(--lit-task-border);
  border-radius: 5px;
  font-weight: 600;
  color: var(--lit-task-text) !important;
  background: linear-gradient(
    135deg,
    var(--lit-task-light) 0%,
    hsl(var(--lit-task-hue), 80%, 90%) 100%
  );
  box-shadow:
    0 0 6px var(--lit-task-glow),
    0 2px 4px rgba(0, 0, 0, 0.08);
  position: relative;
  text-decoration: none !important;
}

/* Shine effect for my-task */
.toc-gene-list a.my-task::before {
  content: "";
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(
    45deg,
    transparent,
    rgba(255, 255, 255, 0.5),
    transparent
  );
  border-radius: 5px;
  opacity: 0.7;
  pointer-events: none;
}

/* Completed with concordant rating (matches suggestion) - subtle success indicator */
.toc-gene-list a.concordance-concordant {
  display: inline-block;
  padding: 3px 6px;
  border: 1.5px solid var(--lit-gold-color);
  border-radius: 4px;
  background: linear-gradient(
    135deg,
    var(--lit-gold-light) 0%,
    rgba(255, 215, 0, 0.12) 100%
  );
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  text-decoration: none !important;
}

/* Completed with discordant rating (differs from suggestion) - silvery shimmer */
.toc-gene-list a.concordance-discordant {
  display: inline-block;
  padding: 3px 6px;
  border: 1.5px dashed var(--lit-silver-color);
  border-radius: 4px;
  background: linear-gradient(
    135deg,
    var(--lit-silver-light) 0%,
    rgba(180, 200, 210, 0.22) 100%
  );
  box-shadow: 0 1px 4px rgba(120, 140, 150, 0.15);
  text-decoration: none !important;
}

/* Assigned to someone else - subtle teal, less urgent than "my task" */
.toc-gene-list a.assigned-other {
  display: inline-block;
  padding: 3px 6px;
  border: 1.5px solid var(--lit-other-border);
  border-radius: 4px;
  background: linear-gradient(
    135deg,
    var(--lit-other-light) 0%,
    hsl(var(--lit-other-hue), 60%, 93%) 100%
  );
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
  text-decoration: none !important;
}

/* Skipped (not executed) - Diagonal strikethrough instead of just dimming */
.toc-gene-list a.concordance-not_executed {
  display: inline-block;
  padding: 3px 6px;
  color: var(--lit-muted-color) !important;
  position: relative;
  text-decoration: none !important;
  background: linear-gradient(
    135deg,
    rgba(245, 246, 247, 0.8) 0%,
    rgba(235, 237, 240, 0.9) 100%
  );
  border: 1px solid #d1d5db;
  border-radius: 4px;
}

/* Diagonal strikethrough line */
.toc-gene-list a.concordance-not_executed::before {
  content: "";
  position: absolute;
  top: 50%;
  left: -2px;
  right: -2px;
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent,
    var(--lit-muted-strike) 10%,
    var(--lit-muted-strike) 90%,
    transparent
  );
  transform: rotate(-12deg);
  pointer-events: none;
}

/* ==========================================================================
   Animation & Interaction Polish
   ========================================================================== */

/* Subtle hover lift for ToC items */
.toc-gene-list a.my-task:hover,
.toc-gene-list a.concordance-concordant:hover,
.toc-gene-list a.concordance-discordant:hover {
  transform: translateY(-1px);
  transition: transform 0.15s ease;
}

/* Focus states for accessibility */
.toc-gene-list a.my-task:focus,
.toc-gene-list a.concordance-concordant:focus,
.toc-gene-list a.concordance-discordant:focus,
.toc-gene-list a.concordance-not_executed:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}
